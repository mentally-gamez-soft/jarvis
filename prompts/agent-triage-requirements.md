
You are a senior python software developer and you are assigned to the design and implementation of a new project: create the agent "agent-triage" that will be responsible for translating the requirements provided by the user into a structured epic that will be stored in a markdown file on an S3 bucket. This epic will serve as a comprehensive document that outlines the key features, functionalities, and objectives of the project, and it will be used as a reference for the development team to understand the scope and goals of the project. You will need to follow the rules defined in the `agents/agent-triage/rules/challenge-requirements.md` file to ensure that the requirements are well-defined, actionable, and properly documented for the development team. Additionally, you will need to ensure that the agent is designed to be flexible and adaptable, allowing it to handle a wide range of requirements and to create epics that are tailored to the specific needs of each project. The agent should also be able to continuously update and refine the epic document as the project evolves and new requirements emerge, ensuring that it remains a living document that accurately represents the current state of the project and its objectives.

# Agent 1: agent-triage
Agent 1, named "agent-triage", will be responsible for polling emails and translate the requirements found in the emails into an epic that will be a markdown structured document stored on a S3 bucket. It will follow the rules defined in the `agents/agent-triage/rules/challenge-requirements.md` file to ensure that the requirements are well-defined, actionable, and properly documented for the development team. This agent will be able to understand the requirements provided in the emails, assess their clarity and completeness, and create a structured epic that outlines the key features, functionalities, and objectives of the project. The epic will be formatted as a markdown document and stored in a designated S3 bucket, ensuring that it is easily accessible to the development team and other stakeholders. Additionally, this agent will continuously update and refine the epic document as the project evolves and new requirements emerge, ensuring that it remains a living document that accurately represents the current state of the project and its objectives.

## Technical details
This agent will be implemented in Python, and it will use the following libraries and tools:
- `boto3` for interacting with AWS S3 to store and manage the epic documents
- `email` and `imaplib` for polling and processing emails to extract requirements
- `markdown` for formatting the epic document as a markdown file
- `microsoft copilot sdk for python` (https://github.com/github/copilot-sdk/tree/main/python) for using the API to assist in translating the requirements into a structured epic document. The copilot SDK will be used to leverage the capabilities of GitHub Copilot in understanding the requirements and generating a well-structured epic document based on those requirements. This will help enhance the quality and clarity of the epic, ensuring that it effectively communicates the project goals and requirements to the development team and stakeholders. The agent will be designed to be flexible and adaptable, allowing it to handle a wide range of requirements and to create epics that are tailored to the specific needs of each project.

## Project structure
- The basecode for the agent will be stored in the `agents/agent-triage/` directory, and it will include the main script for the agent, as well as any helper modules or utilities that are needed for processing emails, interacting with S3, and formatting the epic document. The code will be organized in a way that promotes modularity and maintainability, with clear separation of concerns between different components of the agent. Additionally, the code will be well-documented, with clear comments and docstrings to explain the functionality of each module and function, making it easier for other developers to understand and contribute to the agent in the future.
- The rules for the agent will be stored in the `agents/agent-triage/rules/challenge-requirements.md` file, and they will provide clear guidelines and best practices for how the agent should assess the requirements, create the epic document, and manage the S3 storage. The rules will be designed to ensure that the agent produces high-quality epics that are well-structured, actionable, and properly documented for the development team, while also allowing for flexibility and adaptability to handle a wide range of requirements and project contexts. The rules will be regularly reviewed and updated as needed to ensure that they remain relevant and effective in guiding the agent's behavior and performance in translating requirements into structured epics. Additionally, any exceptions or special cases that arise in the process of translating requirements into epics will be documented in a clear and concise manner, providing enough context for other developers to understand the reasoning behind any deviations from the standard rules and to evaluate whether those exceptions are justified in the context of the project. This documentation will be stored in a dedicated file named `exceptions/requirements-translation.md` where you will list all the exceptions that have been made during the requirements translation process, along with their justifications and any relevant details about the specific context of the project that led to the decision to make those exceptions. This approach ensures transparency and accountability in the requirements translation process, while also allowing for flexibility in handling unique or complex requirements that may not fit neatly within the standard rules.
The rules for the agent can be extended by project: if there are specific requirements or constraints for a particular project that are not covered by the general rules, there will be an attachment to the email named `project-extension-rules.md`. This file should be taken into account by the agent as part of new rules for its own behavior and performance in the context of that specific project. The agent should be able to adapt its behavior based on the rules defined in the `project-extension-rules.md` file, while still adhering to the general rules defined in the `challenge-requirements.md` file. This allows for a high degree of flexibility and adaptability in handling different projects with varying requirements and constraints, while still maintaining a consistent approach to translating requirements into structured epics. The agent will be designed to prioritize the project-specific rules when they are provided, ensuring that it effectively addresses the unique needs and challenges of each project while still following the overarching principles and guidelines defined in the general rules.
The file itself will be stored in a directory at the root of the project named `rules/extensions/agent-triage/` to ensure that it is easily accessible and organized in a way that promotes clarity and maintainability. The `project-extension-rules.md` file will be clearly named and structured to allow for easy identification and understanding of the specific rules and constraints that apply to the project, making it easier for the agent to adapt its behavior accordingly and for other developers to understand the context and requirements of the project. This approach ensures that the agent can effectively handle a wide range of projects with varying requirements while still maintaining a consistent and high-quality approach to translating requirements into structured epics.
This implies that this attachment file needs to be also stored in the S3 bucket along with the epic, and it should be linked to the Trello card of the user story that corresponds to the epic, so that it can be easily accessed and referenced by the development team as they work on implementing the features defined in the epic. The agent will be responsible for ensuring that the `project-extension-rules.md` file is properly stored and linked, and that it is taken into account as part of the rules for translating requirements into structured epics for that specific project. This allows for a high degree of customization and adaptability in handling different projects with unique requirements, while still maintaining a consistent approach to translating requirements into structured epics based on the general rules defined in the `challenge-requirements.md` file.
- The `.env`file of the first agent will be stored in the `agents/agent-triage/.env` file, and it will contain all the necessary environment variables for the agent to function properly, such as AWS credentials for accessing S3, email server credentials for polling emails, and any other relevant configuration settings. The `.env` file will be kept secure and should not be committed to version control, ensuring that sensitive information is protected while still allowing the agent to access the necessary resources and services to perform its tasks effectively. Additionally, the `.env` file will be well-documented, with clear explanations of each environment variable and its purpose, making it easier for other developers to understand and manage the configuration of the agent in the future.

# Technology Stack
The technology stack for the implementation of the "agent-triage" will include:
- Python: as the primary programming language for implementing the agent's functionality and logic.
- Boto3: for interacting with AWS S3 to store and manage the epic documents.
- Email and IMAP libraries: for polling and processing emails to extract requirements.
- Markdown library: for formatting the epic document as a markdown file.
- Microsoft Copilot SDK for Python: for leveraging the capabilities of GitHub Copilot in understanding the requirements and generating a well-structured epic document based on those requirements.
- AWS S3: for storing the epic documents and any related files, ensuring that they are easily accessible to the development team and other stakeholders.

# Functionalities:
This agent will be like a scheduled task that runs every X minutes (the frequency can be defined in the `.env` file) to poll the email inbox for new emails that contain requirements for the project. When a new email is found, the agent will process the email to extract the requirements, assess their clarity and completeness, and create a structured epic document based on those requirements. The epic document will be formatted as a markdown file and stored in a designated S3 bucket, with appropriate permissions and organization to facilitate easy access and management. Additionally, the agent will continuously monitor for any updates or changes to the requirements, and it will update and refine the epic document accordingly to ensure that it remains a living document that accurately represents the current state of the project and its objectives. The agent will also handle any exceptions or special cases that arise during the requirements translation process, documenting them in a clear and concise manner for future reference.

# Monitoring and Observability
To ensure that the "agent-triage" is functioning properly and to facilitate debugging and maintenance, we will implement monitoring and observability features. This will include logging important events and actions taken by the agent, such as when it polls for new emails, when it processes an email to extract requirements, when it creates or updates an epic document in S3, and when it encounters any exceptions or special cases. The logs will be stored in a bucket of the S3 and they will be structured in a way that allows for easy searching and analysis, with clear timestamps and relevant context for each log entry. Additionally, we will set up alerts to notify the development team if the agent encounters any critical issues or if it fails to perform its tasks as expected, allowing for prompt investigation and resolution of any problems that may arise. This monitoring and observability setup will help ensure that the "agent-triage" is reliable, efficient, and effective in translating requirements into structured epics for the development team. In paralle to storing the logs in S3 bucket, the program will also create logs inside the container itself, and these logs will be accessible through the standard output of the container, allowing for real-time monitoring and debugging during development and testing. This dual logging approach ensures that we have both a persistent record of the agent's activities in S3 for long-term analysis and a real-time view of its operations for immediate feedback and troubleshooting.